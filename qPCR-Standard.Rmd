---
title: "RT-qPCR Standard Curve Analysis"
output: html_notebook
---
This code is written to analyse RT q-PCR results from qTower Analytic Jena. 

Getting the dataset: 
Upload the data (Open Project...)from the qTower into qPCRsoft4.1 software.
When setting dilution series in *Settings* make sure the first single numbers are labeled with 01...09 (Name of Standard: Std0 for the single digits, then Std 10 etc.). Set all triplicates in dilutions from 1 to 12 and label with the gene accordingly. 
Then get *Absolute Quantification* and from the table save a csv file for each gene. Make sure the table is sorted by *gene*.

Executing chunk by *Cmd+Shift+Enter* while courser is placed in chunk. 

```{r}
#── Attaching packages ─────────────────────────────────────── 
library(growthcurver)
library(ggplot2)
library(tidyverse)
library(dplyr)
library(ggprism)
```

```{r}
# Get a list of all csv files in the directory --------
csv_files <- list.files(pattern = "*.csv")
source('R/functions.R')
```

```{r}
# Name gene here --------------------------------------
#graph_title <- 'SOX2'
#csv.file <- '20230303_SOX2.csv'
```

```{r}
# Check NTCs ------------------------------------------
# Apply the function to read in and process each file to each file in the csv 
# list, then read out the NTCs 
NTC <- lapply(csv_files, process_csv)

NTC
```

```{r}
# Apply the function to each file in the list ----------
g <- lapply(csv_files, plot_csv)

g
```

```{r}
# Draw ggplot graph -----------------------------------
# fit_csv does by default calculate with the first 8 Standard dilutions, if according to the first plot more can be included the function needs to be altered

source('R/analysis_efficiency.R')
f <- lapply(csv_files, fit_csv)

# Store results in list
#my_list <- list(efficiency = efficiency, efficiency_percentage = efficiency_percentage)
# my_list <- list(df)
# my_list <-

f
```




